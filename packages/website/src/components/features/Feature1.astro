---
// Fundations
import Link from "@/components/fundations/elements/Link.astro";
import Text from "@/components/fundations/elements/Text.astro";
import Wrapper from "@/components/fundations/containers/Wrapper.astro";
// Config
import { EXTERNAL_LINKS } from "@/config/external-links";
// Icons
import Tools from "@/components/fundations/icons/Tools.astro";
import Plus from "@/components/fundations/icons/Plus.astro";
import Cursor from "@/components/fundations/icons/Cursor.astro";
import Camera from "@/components/fundations/icons/Camera.astro";
import Filters from "@/components/fundations/icons/Filters.astro";
import Persist from "@/components/fundations/icons/Persist.astro";
import Stacked from "@/components/fundations/icons/Stacked.astro";
import WaveSquare from "@/components/fundations/icons/WaveSquare.astro";
import ChevronRight from "@/components/fundations/icons/ChevronRight.astro";
import ArrowIteration from "@/components/fundations/icons/ArrowIteration.astro";

interface Props {
  title?: string;
  description?: string;
  items?: {
    title: string;
    description: string;
  }[];
}

const {
  title = "KI-Automatisierung für Ihre Praxis",
  description = "Von der intelligenten Patientenanfragen-Verwaltung bis zur DSGVO-konformen Automatisierung – wir entwickeln maßgeschneiderte Lösungen, die Ihnen Zeit zurückgeben und Ihre Praxis zukunftssicher machen.",
  items = [],
} = Astro.props;

const data = [
  {
    icon: "Filters",
    category: "Praxis-Anfragen-Autopilot",
    text: "Automatische DSGVO-konforme Bearbeitung von Patientenanfragen mit intelligenter Kategorisierung und sofortiger Antwort.",
  },
  {
    icon: "WaveSquare",
    category: "Terminmanagement-KI",
    text: "Intelligente Terminplanung mit Wartelisten-Optimierung und automatischen Erinnerungen.",
  },
  {
    icon: "ArrowIteration",
    category: "Dokumentations-Assistent",
    text: "KI-gestützte Unterstützung bei der Therapiedokumentation und Berichtserstellung.",
  },
  {
    icon: "Plus",
    category: "DSGVO-Compliance-Check",
    text: "Automatische Überprüfung und Dokumentation aller Datenschutzprozesse in Ihrer Praxis.",
  },
  {
    icon: "Cursor",
    category: "PVS-Integration",
    text: "Nahtlose Anbindung an Ihre Praxisverwaltungssoftware (Elefant, Psyprax, Epikur).",
  },
  {
    icon: "Persist",
    category: "Workflow-Automatisierung",
    text: "Optimierung wiederkehrender Verwaltungsaufgaben durch maßgeschneiderte Automatisierung.",
  },
  {
    icon: "Camera",
    category: "TI-Support & Beratung",
    text: "Fachkundige Unterstützung bei der Telematikinfrastruktur und digitalen Gesundheitsanwendungen.",
  },
  {
    icon: "Stacked",
    category: "Praxis-Analytics",
    text: "Datenbasierte Einblicke in Ihre Praxiseffizienz mit automatisierten Reports und Optimierungsvorschlägen.",
  },
];
---

<section>
  <Wrapper variant="standard" class="border-vrly-neutral-200 border-t py-12">
    <div>
      <Text
        variant="textXS"
        data-aos="fade-down"
        data-aos-duration="1000"
        class="text-vrly-slate-400 flex items-center gap-2 font-medium uppercase"
      >
        <Tools size="sm" class="text-vrly-green-600" />
        Spezialisiert auf Psychotherapiepraxen
      </Text>
      <Text
        tag="h2"
        variant="displayMD"
        data-aos="fade-up"
        data-aos-duration="1000"
        class="text-vrly-slate-500 mt-8 font-semibold tracking-tight"
      >
        {title}
      </Text>
      <Text
        tag="p"
        variant="textBase"
        data-aos="fade-up"
        data-aos-duration="1500"
        class="text-vrly-slate-400 mt-2 text-base md:text-balance"
      >
        {description}
      </Text>
      <div
        data-aos="fade-up"
        data-aos-duration="2000"
        class="mt-8 flex flex-col items-start gap-4 sm:flex-row sm:items-center"
      >
        <Link
          size="base"
          variant="default"
          href={EXTERNAL_LINKS.workflowAudit}
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Kostenlosen Workflow-Audit anfordern (öffnet in neuem Tab)"
          gap="xs"
          class="bg-vrly-blue-500 hover:bg-vrly-blue-600 group border-0 text-white"
        >
          Kostenlosen Workflow-Audit anfordern
          <ChevronRight
            size="sm"
            class="easy-out-in duration-300 group-hover:translate-x-2"
          />
        </Link>
        <Link
          size="base"
          variant="muted"
          href="/leistungen"
          gap="xs"
          class="text-vrly-slate-500 hover:text-vrly-blue-600 group"
        >
          Alle Leistungen entdecken
          <ChevronRight
            size="sm"
            class="easy-out-in duration-300 group-hover:translate-x-2"
          />
        </Link>
      </div>
    </div>

    {
      items && items.length > 0 ? (
        <div class="mt-12 grid grid-cols-1 gap-8 md:grid-cols-3">
          {items.map((item) => (
            <div class="border-vrly-neutral-200 rounded-xl border bg-white p-6 shadow-md transition-shadow hover:shadow-lg">
              <h3 class="text-vrly-slate-500 mb-3 text-lg font-semibold">
                {item.title}
              </h3>
              <p class="text-vrly-slate-400">{item.description}</p>
            </div>
          ))}
        </div>
      ) : (
        <ul class="bg-vrly-neutral-200 outline-vrly-neutral-200 mt-12 grid gap-px overflow-hidden rounded-xl shadow-xl outline sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4">
          {data.map((section) => (
            <li class="hover:bg-vrly-neutral-100 group relative flex h-full cursor-pointer flex-col justify-between gap-12 bg-white px-5 pt-6 pb-[30px] transition-all md:min-h-[180px] lg:gap-24">
              <a
                class="absolute inset-0"
                href="/leistungen"
                aria-label={`Mehr über ${section.category} erfahren`}
              />

              <div>
                <div class="flex">
                  <div class="bg-vrly-green-500 group-hover:bg-vrly-blue-500 flex rounded-lg p-2 text-white transition-all duration-300">
                    {section.icon === "Filters" && <Filters size="base" />}
                    {section.icon === "WaveSquare" && (
                      <WaveSquare size="base" />
                    )}
                    {section.icon === "ArrowIteration" && (
                      <ArrowIteration size="base" />
                    )}
                    {section.icon === "Plus" && <Plus size="base" />}
                    {section.icon === "Cursor" && <Cursor size="base" />}
                    {section.icon === "Persist" && <Persist size="base" />}
                    {section.icon === "Camera" && <Camera size="base" />}
                    {section.icon === "Stacked" && <Stacked size="base" />}
                  </div>
                </div>

                <div class="mt-4">
                  <h3 class="text-vrly-slate-500 mb-2 leading-6 font-semibold">
                    {section.category}
                  </h3>
                  <p class="text-vrly-slate-400 text-sm leading-relaxed">
                    {section.text}
                  </p>
                </div>
              </div>

              <Text
                tag="p"
                variant="textSM"
                class="text-vrly-blue-600 group-hover:text-vrly-blue-700 flex items-center gap-2 font-medium"
              >
                Mehr erfahren
                <ChevronRight
                  size="sm"
                  class="duration-300 ease-out group-hover:translate-x-2"
                />
              </Text>
            </li>
          ))}
        </ul>
      )
    }
  </Wrapper>
</section>
